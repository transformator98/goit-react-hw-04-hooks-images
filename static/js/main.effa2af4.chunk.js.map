{"version":3,"sources":["component/ImageGallery/ImageGallery.module.css","App.module.css","component/ImageGalleryItem/ImageGalleryItem.module.css","component/Modal/Modal.module.css","component/Loader/Loader.module.css","component/Button/Button.module.css","component/ImageGalleryItem/ImageGalleryItem.js","component/ImageGallery/ImageGallery.js","component/Searchbar/Searchbar.js","component/Loader/pending.png","component/Loader/Loader.js","component/Modal/Modal.js","component/ImageGallery/ImageErrorView.js","component/Button/Button.js","services/imageGallery-api.js","App.js","index.js","component/Searchbar/Searchbar.module.css"],"names":["module","exports","ImageGalleryItem","webformatURL","largeImageURL","tags","imageClick","className","s","imageGalleryItem","src","data-sourse","alt","image","onClick","ImageGallery","images","largeURL","imageGallery","map","index","Searchbar","state","imageName","handleNameChange","event","setState","target","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","searchbar","this","searchForm","type","button","label","onChange","input","autoComplete","autoFocus","placeholder","Component","ImagePendingView","loader","color","height","width","stules","Array","fill","item","pendingImage","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","children","createPortal","overlay","modal","ImageErrorView","message","propTypes","PropTypes","string","Button","api","page","fetchGallery","name","url","fetch","then","responce","console","log","ok","json","Promise","reject","Error","resetPage","Status","App","total","status","isLoading","handleFormSubmit","galleryAPI","toggleModal","largeImgModal","imagesClick","nodeName","dataset","sourse","fetchApiGallery","hits","length","scrollPage","catch","scrollTo","top","documentElement","scrollHeight","behavior","onLoadMore","prevProps","prevState","app","text","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.effa2af4.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__2HkzL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"app\":\"App_app__29Y6w\",\"text\":\"App_text__2sfJ7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__EX8zR\",\"image\":\"ImageGalleryItem_image__2eH9t\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2pYgl\",\"modal\":\"Modal_modal__1UoM6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__3zcn3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2yY0C\"};","import s from './ImageGalleryItem.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({\n  webformatURL = 'https://picsum.photos/600/400',\n  largeImageURL = 'https://picsum.photos/600/400',\n  tags,\n  imageClick,\n}) {\n  return (\n    <li className={s.imageGalleryItem}>\n      <img\n        src={webformatURL}\n        data-sourse={largeImageURL}\n        alt={tags}\n        className={s.image}\n        onClick={imageClick}\n      />\n    </li>\n  );\n}\nImageGalleryItem.propTypes = {\n  tags: PropTypes.string,\n  webformatURL: PropTypes.string,\n  largeImageURL: PropTypes.string,\n  imageClick: PropTypes.func,\n};\n","import s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport PropTypes from 'prop-types';\n\nconst ImageGallery = ({ images, largeURL }) => {\n  return (\n    <ul className={s.imageGallery}>\n      {images.map((image, index) => (\n        <ImageGalleryItem\n          key={index}\n          webformatURL={image.webformatURL}\n          largeImageURL={image.largeImageURL}\n          tags={image.tags}\n          imageClick={largeURL}\n        />\n      ))}\n    </ul>\n  );\n};\n\nImageGallery.propTypes = {\n  images: PropTypes.arrayOf(\n    PropTypes.shape({\n      index: PropTypes.number.isRequired,\n    }),\n  ),\n  largeURL: PropTypes.string,\n};\nexport default ImageGallery;\n","import { Component } from 'react';\nimport { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\nimport s from './Searchbar.module.css';\n\nexport default class Searchbar extends Component {\n  state = {\n    imageName: '',\n  };\n  handleNameChange = event => {\n    this.setState({ imageName: event.target.value.toLowerCase() });\n  };\n  handleSubmit = event => {\n    event.preventDefault();\n\n    if (this.state.imageName.trim() === '') {\n      toast.error('Введите текст для поиска');\n      return;\n    }\n\n    const { imageName } = this.state;\n    this.props.onSubmit(imageName);\n    this.setState({ imageName: '' });\n  };\n\n  render() {\n    return (\n      <header className={s.searchbar}>\n        <form onSubmit={this.handleSubmit} className={s.searchForm}>\n          <button type=\"submit\" className={s.button}>\n            <span className={s.label}>Search</span>\n          </button>\n          <input\n            value={this.state.imageName}\n            onChange={this.handleNameChange}\n            className={s.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n          />\n        </form>\n      </header>\n    );\n  }\n}\nSearchbar.propTypes = {\n  imageName: PropTypes.string,\n};\n","export default __webpack_public_path__ + \"static/media/pending.d3fe10c8.png\";","import s from './Loader.module.css';\nimport stules from '../ImageGallery/ImageGallery.module.css';\nimport Loader from 'react-loader-spinner';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport pendingImage from './pending.png';\n\nexport default function ImagePendingView() {\n  return (\n    <>\n      <Loader\n        className={s.loader}\n        type=\"Circles\"\n        color=\"#3ccf9e\"\n        height={30}\n        width={30}\n      />\n      <>\n        <ul className={stules.imageGallery}>\n          {Array(12)\n            .fill()\n            .map((item, index) => (\n              <ImageGalleryItem\n                key={index}\n                webformatURL={pendingImage}\n                largeImageURL={pendingImage}\n              />\n            ))}\n        </ul>\n      </>\n    </>\n  );\n}\n","import { Component } from 'react';\nimport { createPortal } from 'react-dom';\nimport PropTypes from 'prop-types';\nimport s from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeyDown);\n  }\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeyDown);\n  }\n  handleKeyDown = event => {\n    if (event.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n  handleBackdropClick = event => {\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { children } = this.props;\n\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\n        <div className={s.modal}>{children}</div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nModal.propTypes = {\n  onClose: PropTypes.func,\n};\n","import { toast } from 'react-toastify';\nimport PropTypes from 'prop-types';\n\nexport default function ImageErrorView({ message }) {\n  return toast.error(`${message}`);\n}\n\nImageErrorView.propTypes = {\n  message: PropTypes.string,\n};\n","import s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <button className={s.button} type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","const apiKey = '18773643-f1542c573d467a3c4fb890edb';\n\nconst api = {\n  page: 1,\n\n  fetchGallery(name) {\n    const url = `https://pixabay.com/api/?q=${name}&page=${this.page}&key=${apiKey}&image_type=photo&orientation=horizontal&per_page=12`;\n\n    return fetch(url).then(responce => {\n      this.page += 1;\n      console.log(responce);\n\n      if (responce.ok) {\n        return responce.json();\n      }\n      return Promise.reject(new Error(`Нет картинок по запросу ${name}`));\n    });\n  },\n  resetPage() {\n    this.page = 1;\n  },\n};\n\nexport default api;\n","import { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { toast } from 'react-toastify';\n\nimport s from './App.module.css';\n\nimport ImageGallery from './component/ImageGallery';\nimport Searchbar from './component/Searchbar';\nimport Loader from './component/Loader';\nimport Modal from './component/Modal/';\nimport ImageErrorView from './component/ImageGallery/ImageErrorView';\nimport Button from './component/Button';\n\nimport galleryAPI from './services/imageGallery-api';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\nexport default class App extends Component {\n  state = {\n    imageName: '',\n    largeImageURL: '',\n    images: [],\n    total: null,\n\n    //TODO START перенос из ImageGallary\n    page: 1,\n    error: null,\n    status: Status.IDLE,\n    isLoading: false,\n  };\n\n  handleFormSubmit = imageName => {\n    galleryAPI.resetPage();\n\n    this.setState({ imageName });\n  };\n\n  toggleModal = () => {\n    this.setState({ largeImageURL: '' });\n  };\n\n  largeImgModal = event => {\n    const imagesClick = event.target;\n\n    if (imagesClick.nodeName !== 'IMG') {\n      return;\n    }\n\n    const largeURL = imagesClick.dataset.sourse;\n    this.setState(({ largeImageURL }) => ({\n      largeImageURL: largeURL,\n    }));\n  };\n\n  //TODO START перенос из ImageGallary\n\n  componentDidUpdate(prevProps, prevState) {\n    const prevName = prevState.imageName;\n    const nextName = this.state.imageName;\n\n    if (prevName !== nextName) {\n      this.setState({ status: Status.PENDING, images: [], page: 1 });\n\n      this.fetchApiGallery();\n    }\n  }\n\n  fetchApiGallery = () => {\n    const { page } = this.state;\n    const { imageName } = this.state;\n\n    galleryAPI\n      .fetchGallery(imageName, page)\n\n      .then(({ hits, total }) => {\n        if (hits.length === 0) {\n          toast.error('По вашему запросу нет нужного результата!');\n        }\n        this.setState({\n          images: [...this.state.images, ...hits],\n          total,\n          isLoading: false,\n          status: Status.RESOLVED,\n        });\n        this.scrollPage();\n      })\n      .catch(error => this.setState({ error, status: Status.REJECTED }));\n  };\n  scrollPage = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: 'smooth',\n    });\n  };\n  onLoadMore = () => {\n    this.setState({ isLoading: true });\n    this.fetchApiGallery();\n  };\n  // TODO END перенос- из ImageGallary\n\n  render() {\n    const {\n      largeImageURL,\n      imageName,\n      images,\n      error,\n      status,\n      total,\n    } = this.state;\n\n    return (\n      <div className={s.app}>\n        <Searchbar onSubmit={this.handleFormSubmit} />\n        {status === 'idle' && (\n          <div className={s.text}>Введите текст для поиска</div>\n        )}\n        {status === 'pending' && <Loader />}\n        {status === 'rejected' && <ImageErrorView message={error.message} />}\n        {total > 1 && status === 'resolved' && (\n          <ImageGallery images={images} largeURL={this.largeImgModal} />\n        )}\n        {largeImageURL && (\n          <Modal onClose={this.toggleModal}>\n            <img src={largeImageURL} alt={imageName} />\n          </Modal>\n        )}\n        {this.state.isLoading && <Loader />}\n        {total > images.length && !this.state.isLoading && (\n          <Button onClick={this.onLoadMore} />\n        )}\n        <ToastContainer autoClose={3000} />\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport 'modern-normalize/modern-normalize.css';\n\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1fCoM\",\"searchForm\":\"Searchbar_searchForm__TBh7S\",\"button\":\"Searchbar_button__1z0Xa\",\"label\":\"Searchbar_label__Jq4Py\",\"input\":\"Searchbar_input__197LH\"};"],"sourceRoot":""}