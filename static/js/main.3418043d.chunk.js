(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{11:function(e,t,a){e.exports={app:"App_app__29Y6w",text:"App_text__2sfJ7"}},12:function(e,t,a){e.exports={imageGalleryItem:"ImageGalleryItem_imageGalleryItem__EX8zR",image:"ImageGalleryItem_image__2eH9t"}},13:function(e,t,a){e.exports={overlay:"Modal_overlay__2pYgl",modal:"Modal_modal__1UoM6"}},15:function(e,t,a){e.exports={loader:"Loader_loader__3zcn3"}},17:function(e,t,a){e.exports={button:"Button_button__2yY0C"}},46:function(e,t,a){"use strict";a.r(t);var r=a(1),c=a(0),n=a.n(c),o=a(4),s=a.n(o),i=(a(23),a(14)),l=a(3),u=a(5),b=(a(24),a(11)),m=a.n(b),j=a(9),d=a.n(j),g=a(12),h=a.n(g);function p(e){var t=e.webformatURL,a=void 0===t?"https://picsum.photos/600/400":t,c=e.largeImageURL,n=void 0===c?"https://picsum.photos/600/400":c,o=e.tags,s=e.imageClick;return Object(r.jsx)("li",{className:h.a.imageGalleryItem,children:Object(r.jsx)("img",{src:a,"data-sourse":n,alt:o,className:h.a.image,onClick:s})})}var f=function(e){var t=e.images,a=e.largeURL;return Object(r.jsx)("ul",{className:d.a.imageGallery,children:t.map((function(e,t){return Object(r.jsx)(p,{webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags,imageClick:a},t)}))})},O=a(6),_=a.n(O);function x(e){var t=e.onSubmit,a=Object(c.useState)(""),n=Object(l.a)(a,2),o=n[0],s=n[1];return Object(r.jsx)("header",{className:_.a.searchbar,children:Object(r.jsxs)("form",{onSubmit:function(e){e.preventDefault(),""!==o.trim()?(t(o),s("")):u.b.error("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430")},className:_.a.searchForm,children:[Object(r.jsx)("button",{type:"submit",className:_.a.button,children:Object(r.jsx)("span",{className:_.a.label,children:"Search"})}),Object(r.jsx)("input",{value:o,onChange:function(e){s(e.target.value.toLowerCase())},className:_.a.input,type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos"})]})})}var v=a(15),y=a.n(v),S=a(16),w=a.n(S),L=a.p+"static/media/pending.d3fe10c8.png";function N(){return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(w.a,{className:y.a.loader,type:"Circles",color:"#3ccf9e",height:30,width:30}),Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("ul",{className:d.a.imageGallery,children:Array(12).fill().map((function(e,t){return Object(r.jsx)(p,{webformatURL:L,largeImageURL:L},t)}))})})]})}var k=a(13),C=a.n(k),I=document.querySelector("#modal-root");function G(e){var t=e.onClose,a=e.children;Object(c.useEffect)((function(){return window.addEventListener("keydown",n),function(){return window.removeEventListener("keydown",n)}}));var n=function(e){"Escape"===e.code&&t()};return Object(o.createPortal)(Object(r.jsx)("div",{className:C.a.overlay,onClick:function(e){e.currentTarget===e.target&&t()},children:Object(r.jsx)("div",{className:C.a.modal,children:a})}),I)}var R=a(2),U=a.n(R);function E(e){var t=e.message;return u.b.error("".concat(t))}E.propTypes={message:U.a.string};var M=a(17),F=a.n(M);function z(e){var t=e.loadMore;return Object(r.jsx)("button",{className:F.a.button,type:"button",onClick:t,children:"Load more"})}var P={page:1,fetchGallery:function(e){var t=this,a="https://pixabay.com/api/?q=".concat(e,"&page=").concat(this.page,"&key=").concat("18773643-f1542c573d467a3c4fb890edb","&image_type=photo&orientation=horizontal&per_page=12");return fetch(a).then((function(a){return t.page+=1,a.ok?a.json():Promise.reject(new Error("\u041d\u0435\u0442 \u043a\u0430\u0440\u0442\u0438\u043d\u043e\u043a \u043f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 ".concat(e)))}))},resetPage:function(){this.page=1}},H="idle",J="pending",T="resolved",q="rejected";function A(){var e=Object(c.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],o=Object(c.useState)(""),s=Object(l.a)(o,2),b=s[0],j=s[1],d=Object(c.useState)([]),g=Object(l.a)(d,2),h=g[0],p=g[1],O=Object(c.useState)(null),_=Object(l.a)(O,2),v=_[0],y=_[1],S=Object(c.useState)(1),w=Object(l.a)(S,2),L=w[0],k=w[1],C=Object(c.useState)(null),I=Object(l.a)(C,2),R=I[0],U=I[1],M=Object(c.useState)(H),F=Object(l.a)(M,2),A=F[0],B=F[1],Y=Object(c.useState)(!1),X=Object(l.a)(Y,2),D=X[0],K=X[1];Object(c.useEffect)((function(){if(""!==a){B(J);P.fetchGallery(a,L).then((function(e){var t=e.hits,a=e.total;0===t.length&&u.b.error("\u041f\u043e \u0432\u0430\u0448\u0435\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0435\u0442 \u043d\u0443\u0436\u043d\u043e\u0433\u043e \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u0430!"),p((function(e){return[].concat(Object(i.a)(e),Object(i.a)(t))})),y(a),K(!1),B(T)})).catch((function(e){U(e),B(q)})),window.scrollTo({top:document.documentElement.offsetHeight,behavior:"smooth"})}}),[a,L]);return Object(r.jsxs)("div",{className:m.a.app,children:[Object(r.jsx)(x,{onSubmit:function(e){P.resetPage(),n(e),p([]),k(1)}}),A===H&&Object(r.jsx)("div",{className:m.a.text,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430"}),A===J&&Object(r.jsx)(N,{}),A===q&&Object(r.jsx)(E,{message:R.message}),v>1&&A===T&&Object(r.jsx)(f,{images:h,largeURL:function(e){var t=e.target;if("IMG"===t.nodeName){var a=t.dataset.sourse;j(a)}}}),b&&Object(r.jsx)(G,{onClose:function(){j("")},children:Object(r.jsx)("img",{src:b,alt:a})}),D&&Object(r.jsx)(N,{}),v>h.length&&Object(r.jsx)(z,{loadMore:function(){K(!0),k((function(e){return e+1}))}}),Object(r.jsx)(u.a,{autoClose:3e3})]})}s.a.render(Object(r.jsx)(n.a.StrictMode,{children:Object(r.jsx)(A,{})}),document.getElementById("root"))},6:function(e,t,a){e.exports={searchbar:"Searchbar_searchbar__1fCoM",searchForm:"Searchbar_searchForm__TBh7S",button:"Searchbar_button__1z0Xa",label:"Searchbar_label__Jq4Py",input:"Searchbar_input__197LH"}},9:function(e,t,a){e.exports={imageGallery:"ImageGallery_imageGallery__2HkzL"}}},[[46,1,2]]]);
//# sourceMappingURL=main.3418043d.chunk.js.map